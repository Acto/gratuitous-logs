<h1>Posts <%= link_to 'ï¼‹', new_post_path %></h1>

<table id="post_table">
  <tr>
    <th>ID</th>
    <th>Date</th>
    <th>Title</th>
    <th>Category(M)</th>
    <th>Tag_List</th>
    <th></th>
    <th></th>
    <th></th>
  </tr>

  <% @posts.order("updated_at DESC").each do |post| %>
    <tr>
      <td><%= post.id %></td>
      <td><%= post.updated_at.to_date %></td>
      <td><%= post.title %></td>
      <td><%= post.category_id %></td>
      <td>
        <% post.tags.order(:name).each do |tag| %>
          <%= "#{tag.name}(#{tag.taggings_count})" %>
        <% end %>
      </td>
      <td><%= link_to 'Show', post %></td>
      <td><%= link_to 'Edit', edit_post_path(post) %></td>
      <td><%= link_to 'Delete', post_path(post),
                method: :delete, data: { confirm: 'Can I Delete this Article?' } %></td>
    </tr>
  <% end %>
</table>

<br />

<h1>Categories</h1>

<table id="category_table">
  <tr>
    <th>ID</th>
    <th>name</th>
    <th>description</th>
    <th>image_url (Cloudinary)</th>
    <th>IMAGE</th>
    <th>Posts_Count <br /> (stats)</th>
    <th>ACTIONS</th>
  </tr>

  <% @categories.each do |category| %>
    <tr>
      <td><%= category.id %></td>
      <td><%= category.name %></td>
      <td><%= category.description %></td>
      <td><%= category.image_url %></td>
      <td><%= image_tag(category.image_url, alt: category.description, width: '100px') %></td>
      <td><%= category.posts.length %></td>
      <td>UPDATE &nbsp DELETE </td>
    </tr>
  <% end %>

  <%= form_for @new_category, url: create_category_posts_path do |f| %>
    <tr class="new">
      <td>NEW</td>
      <td><%= f.text_field :name, :placeholder => "name" %></td>
      <td><%= f.text_field :description, :placeholder => "description" %></td>
      <td><%= f.text_field :image_url, :placeholder => "image_url" %></td>
      <td></td>
      <td></td>
      <td><%= f.submit "Create!" %></td>
    </tr>
  <% end %>

</table>
